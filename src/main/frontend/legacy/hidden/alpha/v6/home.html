<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VinylMatch - Home</title>

  <script>
    (() => {
      try {
        const theme = localStorage.getItem("vinylmatch_theme");
        if (theme === "light" || theme === "dark") document.documentElement.dataset.theme = theme;
      } catch (_) {}

      document.documentElement.dataset.homeVariant = "6";
    })();
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Alegreya+Sans:wght@400;500;700&family=Bebas+Neue&family=Cormorant+Garamond:wght@500;700&family=Fraunces:opsz,wght@9..144,500;9..144,700&family=IBM+Plex+Sans:wght@400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Design 4: Brutalist - Archivo Black + Space Mono -->
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <!-- Design 6: Editorial - Playfair Display + Source Serif Pro -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/common/header.css">
  <link rel="stylesheet" href="/styles/home.css">
  <link rel="stylesheet" href="/styles/home-variant6.css">
</head>
<body>
<div id="header"></div>

<div id="global-loading" class="loading-overlay hidden" role="alert" aria-live="assertive">
  <div class="spinner" aria-hidden="true"></div>
  <p id="global-loading-text">Loading playlist…</p>
</div>

<div class="page-container" id="home-page">
  <button type="button" class="sidebar-toggle" id="sidebar-toggle" aria-controls="home-sidebar" aria-expanded="false" aria-label="Toggle playlist drawer">
    Open playlists
  </button>
  <div class="sidebar-backdrop hidden" id="sidebar-backdrop"></div>

  <aside class="sidebar" id="home-sidebar">
    <h3>Playlist Drawer</h3>

    <div class="sidebar-tabs" role="tablist" aria-label="Playlist sources">
      <button id="recent-tab" class="sidebar-tab active" type="button" role="tab" aria-selected="true" aria-controls="recent-panel" data-target="recent-panel">
        Recent
      </button>
      <button id="popular-tab" class="sidebar-tab" type="button" role="tab" aria-selected="false" aria-controls="popular-panel" data-target="popular-panel">
        Popular
      </button>
      <button id="user-tab" class="sidebar-tab" type="button" role="tab" aria-selected="false" aria-controls="user-panel" data-target="user-panel" disabled>
        Yours
      </button>
    </div>

    <div class="sidebar-panel" id="recent-panel" role="tabpanel" aria-labelledby="recent-tab">
      <div id="recent-list" class="recent-list"></div>
      <p class="sidebar-empty" data-context="recent">No recent playlists yet.</p>
    </div>

    <div class="sidebar-panel hidden" id="popular-panel" role="tabpanel" aria-labelledby="popular-tab">
      <div id="popular-list" class="recent-list"></div>
      <p class="sidebar-empty" data-context="popular">No suggestions available right now.</p>
    </div>

    <div class="sidebar-panel hidden" id="user-panel" role="tabpanel" aria-labelledby="user-tab" aria-disabled="true">
      <div id="user-controls" class="user-controls hidden">
        <label class="user-search" for="user-playlist-search">
          <span class="sr-only">Search playlists</span>
          <input type="search" id="user-playlist-search" name="user_playlist_search" placeholder="Search playlists…" autocomplete="off" />
        </label>
        <label class="user-sort" for="user-playlist-sort">
          <span>Sort by</span>
          <select id="user-playlist-sort" name="user_playlist_sort">
            <option value="name-asc">Name (A-Z)</option>
            <option value="name-desc">Name (Z-A)</option>
            <option value="tracks-desc">Tracks (desc)</option>
            <option value="tracks-asc">Tracks (asc)</option>
          </select>
        </label>
      </div>

      <div id="user-playlist-list" class="recent-list"></div>

      <div id="user-pagination" class="user-pagination hidden" aria-live="polite">
        <button type="button" class="pager-btn" id="user-prev-page" aria-label="Previous page">Prev</button>
        <span id="user-page-info">Page 1 of 1</span>
        <button type="button" class="pager-btn" id="user-next-page" aria-label="Next page">Next</button>
      </div>

      <p id="user-status" class="sidebar-status" aria-live="polite"></p>
      <p class="sidebar-empty" data-context="user">Log in with Spotify to see your playlists.</p>
    </div>
  </aside>

  <main class="home-main">
    <section class="hero-card" aria-labelledby="home-hero-title">
      <div class="hero-logo-wrap">
        <!-- SVG Logo with light/dark variants -->
        <img class="hero-logo-svg logo-light" src="/design/logo-black.svg" alt="VinylMatch" aria-hidden="true" />
        <img class="hero-logo-svg logo-dark" src="/design/logo-white.svg" alt="VinylMatch" aria-hidden="true" />
        <!-- Fallback PNG -->
        <img class="hero-logo" src="/design/VM_Logo.png" alt="VinylMatch" width="900" height="600" fetchpriority="high" decoding="async" onerror="this.style.display='none'" />
        <p class="hero-variant-label" id="variant-label">Design 1 - Split Stage</p>
      </div>
      <div class="hero-content">
        <p class="eyebrow">Record-first discovery for Spotify playlists</p>
        <h1 id="home-hero-title">Turn stream-only playlists into crate-digging maps.</h1>
        <p class="hero-lede">
          VinylMatch finds playlist records and gives you Discogs context plus store-ready links in one pass.
        </p>


      </div>
    </section>

    <section class="paste-panel" aria-labelledby="paste-heading">
      <div class="paste-panel__header">
        <div>
          <p class="eyebrow">Get started</p>
          <h2 id="paste-heading">Paste your Spotify playlist link</h2>
        </div>
        <p class="badge">Discogs + store links</p>
      </div>

      <p class="help">Paste a Spotify playlist URL or a 22-character playlist ID, then click "Use link".</p>

      <div class="input-row">
        <label class="sr-only" for="playlist-url">Spotify playlist URL</label>
        <textarea id="playlist-url" name="playlist_url" rows="2" aria-describedby="home-status" placeholder="https://open.spotify.com/playlist/…" autocomplete="off" spellcheck="false"></textarea>
        <div class="actions">
          <button class="btn" id="use-link" type="button">Use link</button>
        </div>
      </div>

      <div class="signal-row">
        <p class="signal-tip">Tip: Open the playlist drawer to launch recent or popular playlists instantly.</p>
        <p id="home-status" class="status-message hidden" role="status" aria-live="polite"></p>
      </div>
    </section>
  </main>
</div>

  <script>
    // Update variant label based on current design
    (() => {
      const labels = {
        "3": "Design 3 - Archive Column",
        "4": "Design 4 - Brutalist Raw",
        "6": "Design 6 - Editorial Magazine"
      };
      const variant = document.documentElement.dataset.homeVariant || "1";
      const labelEl = document.getElementById('variant-label');
      if (labelEl && labels[variant]) {
        labelEl.textContent = labels[variant];
      }
    })();
  </script>
  <script type="module" src="/dist/main.js"></script>
</body>
</html>
