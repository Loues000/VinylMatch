<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VINYL MATCH — Playlist</title>

    <!-- Header Styles laden -->
    <link rel="stylesheet" href="/common/header.css">

    <!-- Restliche Playlist-Seite Styles -->
    <link rel="stylesheet" href="/styles/playlist.css">
</head>
<body>
<div id="header"></div>

<div id="global-loading" class="loading-overlay hidden" role="alert" aria-live="assertive">
    <div class="spinner" aria-hidden="true"></div>
    <p id="global-loading-text">Playlist wird geladen …</p>
</div>

<div class="playlist-page">
    <div id="playlist-header"></div>

    <div class="playlist-toolbar">
        <div id="view-toggle" class="view-toggle" role="group" aria-label="Darstellung wechseln">
            <button type="button" class="view-toggle-btn" data-mode="list">Liste</button>
            <button type="button" class="view-toggle-btn" data-mode="grid">Kacheln</button>
        </div>
    </div>

    <section class="discogs-panel" aria-labelledby="discogs-heading">
        <div class="discogs-card">
            <div class="discogs-card__header">
                <div>
                    <p class="eyebrow">Discogs</p>
                    <h2 id="discogs-heading">Wunschliste &amp; Sammlung</h2>
                    <p class="muted">Verbinde deinen Discogs-Account mit deinem persönlichen User-Token, um zu sehen, welche Playlist-Alben du bereits besitzt oder direkt auf die Wunschliste setzen möchtest.</p>
                </div>
                <div class="discogs-chip" id="discogs-status">Nicht verbunden</div>
            </div>

            <div class="discogs-login" id="discogs-login">
                <label for="discogs-token">Discogs User-Token</label>
                <div class="discogs-login__row">
                    <input id="discogs-token" type="password" placeholder="z. B. DjYtMa..." autocomplete="off" />
                    <button type="button" class="btn" id="discogs-connect">Verbinden</button>
                </div>
                <p class="hint">Den Token findest du in deinen Discogs-Einstellungen unter &quot;Developer&quot;. Dein Token bleibt nur lokal in dieser Sitzung.</p>
            </div>

            <div class="discogs-dashboard hidden" id="discogs-dashboard">
                <div class="discogs-summary">
                    <div>
                        <p class="eyebrow">Verbunden als</p>
                        <h3 id="discogs-user"></h3>
                    </div>
                    <div class="discogs-actions">
                        <button type="button" class="btn ghost" id="discogs-refresh">Aktualisieren</button>
                        <button type="button" class="btn danger" id="discogs-disconnect">Trennen</button>
                    </div>
                </div>

                <div class="discogs-wishlist">
                    <div class="discogs-wishlist__header">
                        <h4>Deine Wunschliste</h4>
                        <p class="muted" id="discogs-wishlist-count"></p>
                    </div>
                    <div class="discogs-wishlist__grid" id="discogs-wishlist-grid"></div>
                    <p class="muted" id="discogs-wishlist-empty">Noch keine Wunschliste geladen.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="curation-panel" aria-labelledby="curation-heading">
        <div class="curation-card">
            <div class="curation-card__header">
                <div>
                    <p class="eyebrow">Dev · Discogs-Kuration</p>
                    <h2 id="curation-heading">Links für diese Playlist sammeln</h2>
                    <p class="muted">Steuere Album für Album durch die Playlist, prüfe die Discogs-Treffer und sichere den richtigen Link in einem Sammel-File.</p>
                </div>
                <div class="curation-progress" id="curation-progress">0 / 0</div>
            </div>

            <div class="curation-toolbar">
                <button type="button" class="btn" id="curation-start">Playlist scannen</button>
                <div class="curation-nav">
                    <button type="button" class="btn ghost" id="curation-prev" aria-label="Vorheriges Album">← Zurück</button>
                    <button type="button" class="btn ghost" id="curation-next" aria-label="Nächstes Album">Weiter →</button>
                </div>
            </div>

            <div class="curation-body">
                <div class="curation-album" id="curation-album"></div>
                <div class="curation-candidates" id="curation-candidates"></div>
                <p class="muted" id="curation-empty">Klicke auf "Playlist scannen", um die ersten Kandidaten anzuzeigen.</p>
            </div>
        </div>
    </section>

    <div id="playlist" class="playlist-tracks" aria-live="polite">Loading...</div>

    <div class="load-more-wrapper hidden" id="load-more-wrapper">
        <button type="button" class="btn load-more" id="load-more">Weitere Titel laden</button>
    </div>
</div>

<script type="module" src="/dist/main.js"></script>
</body>
</html>
